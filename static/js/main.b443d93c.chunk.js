(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,,,,,,,,,function(t,e,n){},function(t,e,n){},,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var s=n(9),c=n.n(s),a=n(2),o=n(1),r=(n(14),n(15),n(4)),i=n(3),u=n.n(i),l="https://mate.academy/students-api",m=function(){var t=Object(r.a)(u.a.mark((function t(e){var n,s,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e?"".concat(l,"/posts/").concat(e):"".concat(l,"/posts"),t.next=3,fetch(n);case 3:if((s=t.sent).ok){t.next=6;break}throw new Error("".concat(s.status," ").concat(s.statusText));case 6:return t.next=8,s.json();case 8:return c=t.sent,t.abrupt("return",c);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=n(0),d=function(t){var e=t.post,n=t.setShowDetails,s=t.showDetails,c=Object(o.useState)(!0),r=Object(a.a)(c,2),i=r[0],u=r[1];return Object(j.jsxs)("li",{className:"PostsList__item",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("b",{children:"[User #".concat(e.userId,"]: ")}),e.title]}),Object(j.jsx)("button",{type:"button",className:"PostsList__button button ".concat(null!==s&&s===e.id?"red":""),onClick:function(){null!==s&&s===e.id?n(null):n(e.id),u((function(t){return!t}))},disabled:null!==s&&s!==e.id,children:i?"Open":"Close"})]})},b=(n(18),function(t){var e=t.setPostList,n=t.postList,s=t.userSelected,c=t.setShowDetails,a=t.showDetails;return Object(o.useEffect)((function(){m().then((function(t){(null===t||void 0===t?void 0:t.length)>0&&e(t)}))}),[]),Object(j.jsxs)("div",{className:"PostsList",children:[Object(j.jsx)("h2",{children:"Posts:"}),Object(j.jsx)("ul",{className:"PostsList__list",children:n.filter((function(t){return 0===s||t.userId===s})).map((function(t){return Object(j.jsx)(d,{post:t,setShowDetails:c,showDetails:a},t.id)}))})]})}),h=n(7),f="https://mate.academy/students-api",p=function(){var t=Object(r.a)(u.a.mark((function t(e){var n,s,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(f,"/comments?postId=").concat(e),t.next=3,fetch(n);case 3:if((s=t.sent).ok){t.next=6;break}throw new Error("".concat(s.status," ").concat(s.statusText));case 6:return t.next=8,s.json();case 8:return c=t.sent,t.abrupt("return",c);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(){var t=Object(r.a)(u.a.mark((function t(e){var n,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(f,"/comments/").concat(e),t.next=3,fetch(n,{method:"DELETE"});case 3:if((s=t.sent).ok){t.next=6;break}throw new Error("".concat(s.status," ").concat(s.statusText));case 6:return t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=Object(r.a)(u.a.mark((function t(e){var n,s,c,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(f,"/comments"),s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},t.next=4,fetch(n,s);case 4:if((c=t.sent).ok){t.next=7;break}throw new Error("".concat(c.status," ").concat(c.statusText));case 7:return t.next=9,c.json();case 9:return a=t.sent,t.abrupt("return",a);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=(n(19),function(t){var e=t.postId,n=t.setCommentsToPost,s=Object(o.useState)(""),c=Object(a.a)(s,2),r=c[0],i=c[1],u=Object(o.useState)(""),l=Object(a.a)(u,2),m=l[0],d=l[1],b=Object(o.useState)(""),f=Object(a.a)(b,2),p=f[0],O=f[1];return Object(j.jsxs)("form",{className:"NewCommentForm",onSubmit:function(t){t.preventDefault(),""!==r&&""!==m&&""!==p&&(x({postId:e,name:r,email:m,body:p}).then((function(t){t.body&&n((function(e){return[].concat(Object(h.a)(e),[t])}))})).catch((function(t){console.warn("".concat(t.message))})),i(""),d(""),O(""))},children:[Object(j.jsx)("div",{className:"form-field",children:Object(j.jsx)("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",onChange:function(t){i(t.target.value)},value:r})}),Object(j.jsx)("div",{className:"form-field",children:Object(j.jsx)("input",{type:"text",name:"email",placeholder:"Your email",className:"NewCommentForm__input",onChange:function(t){d(t.target.value)},value:m})}),Object(j.jsx)("div",{className:"form-field",children:Object(j.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",onChange:function(t){O(t.target.value)},value:p})}),Object(j.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})}),w=function(t){var e=t.comment,n=t.setCommentsToPost;return Object(j.jsxs)("li",{className:"PostDetails__list-item",children:[Object(j.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){O(e.id).then((function(t){t.ok&&n((function(t){return Object(h.a)(t).filter((function(t){return t.id!==e.id}))}))})).catch((function(t){console.warn("".concat(t.message))}))},children:"X"}),Object(j.jsx)("p",{children:e.body})]})},_=function(t){var e=t.postId,n=t.commentsToPost,s=t.setCommentsToPost,c=Object(o.useState)(!1),r=Object(a.a)(c,2),i=r[0],u=r[1];return Object(o.useEffect)((function(){p(e).then((function(t){t.length>0&&s(t)})).catch((function(t){console.warn(t)}))}),[]),Object(j.jsx)("section",{className:"PostDetails__comments",children:n.length>0&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{type:"button",className:"button",onClick:function(){u((function(t){return!t}))},children:"".concat(i?"Show":"Hide"," ").concat(n.length," comments")}),!i&&Object(j.jsx)("ul",{className:"PostDetails__list",children:n.map((function(t){return Object(j.jsx)(w,{comment:t,setCommentsToPost:s},t.id)}))})]})})},N=(n(20),function(t){var e=t.showDetails,n=Object(o.useState)(null),s=Object(a.a)(n,2),c=s[0],r=s[1],i=Object(o.useState)([]),u=Object(a.a)(i,2),l=u[0],d=u[1];return Object(o.useEffect)((function(){m(e).then((function(t){t.body&&r(t)})).catch((function(t){return console.warn(t)}))}),[]),Object(j.jsxs)("div",{className:"PostDetails",children:[Object(j.jsx)("h2",{children:"Post details:"}),c&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("section",{className:"PostDetails__post",children:Object(j.jsx)("p",{children:c.body})}),Object(j.jsx)(_,{postId:c.id,commentsToPost:l,setCommentsToPost:d}),Object(j.jsx)("section",{children:Object(j.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(j.jsx)(v,{postId:c.id,setCommentsToPost:d})})})]})]})}),y=[{id:0,name:"All users"},{id:1,name:"Leanne Graham"},{id:2,name:"Ervin Howell"},{id:3,name:"Clementine Bauch"},{id:4,name:"Patricia Lebsack"},{id:5,name:"Chelsey Dietrich"},{id:6,name:"Mrs. Dennis Schulist"},{id:7,name:"Kurtis Weissnat"},{id:8,name:"Nicholas Runolfsdottir V"},{id:9,name:"Glenna Reichert"}],S=function(t){var e=t.setUserSelected,n=t.setShowDetails;return Object(j.jsx)("header",{className:"App__header",children:Object(j.jsxs)("label",{children:["Select a user: \xa0",Object(j.jsx)("select",{className:"App__user-selector",onChange:function(t){e(Number(t.target.value)),n(null)},children:y.map((function(t){return Object(j.jsx)("option",{value:t.id,children:t.name},t.id)}))})]})})},P=function(){var t=Object(o.useState)([]),e=Object(a.a)(t,2),n=e[0],s=e[1],c=Object(o.useState)(0),r=Object(a.a)(c,2),i=r[0],u=r[1],l=Object(o.useState)(null),m=Object(a.a)(l,2),d=m[0],h=m[1];return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(S,{setUserSelected:u,setShowDetails:h}),Object(j.jsxs)("main",{className:"App__main",children:[Object(j.jsx)("div",{className:"App__sidebar",children:Object(j.jsx)(b,{postList:n,setPostList:s,userSelected:i,setShowDetails:h,showDetails:d})}),Object(j.jsx)("div",{className:"App__content",children:d&&Object(j.jsx)(N,{showDetails:d})})]})]})};c.a.render(Object(j.jsx)(P,{}),document.getElementById("root"))}],[[21,1,2]]]);
//# sourceMappingURL=main.b443d93c.chunk.js.map